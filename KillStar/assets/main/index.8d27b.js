window.__require=function t(e,n,o){function a(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){return a(e[r][1][t]||t)},l,l.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"b7781IztcJMRJIVevdVrnTb","AudioManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./../Enum"),r=t("./DataManager"),s=t("./ResourceManager"),c=function(){function t(){this.audioSource=null}return t.getInstance=function(){return null===this._instance&&(this._instance=new this,this._instance.init()),this._instance},Object.defineProperty(t,"instance",{get:function(){return this.getInstance()},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.audioSource=new cc.AudioSource,this.audioSource.loop=!0},t.prototype.playMusic=function(){return o(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return r.default.instance.audioMusic?this.audioSource.clip?(this.audioSource.play(),[2]):[4,s.default.instance.getClip(i.ENUM_AUDIO_CLIP.BGM)]:[2];case 1:return t=e.sent(),this.audioSource.clip=t,this.audioSource.play(),[2]}})})},t.prototype.stopMusic=function(){this.audioSource.stop()},t.prototype.playSound=function(t,e){return void 0===e&&(e=!1),o(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return r.default.instance.audioSound?[4,s.default.instance.getClip(t)]:[2];case 1:return n=o.sent(),[2,cc.audioEngine.playEffect(n,e)]}})})},t.prototype.stopSound=function(t){cc.audioEngine.stopEffect(t)},t._instance=null,t}();n.default=c,cc._RF.pop()},{"./../Enum":"Enum","./DataManager":"DataManager","./ResourceManager":"ResourceManager"}],Baselayer:[function(t,e,n){"use strict";cc._RF.push(e,"67767R5eDlEaIJb3SrHBYLI","Baselayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],ChessEffect:[function(t,e,n){"use strict";cc._RF.push(e,"47ec5Ami5ZGuoR1oaKxY8Gt","ChessEffect");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.particleSystem=null,e}return a(e,t),e.prototype.play=function(){this.particleSystem.resetSystem()},i([c(cc.ParticleSystem)],e.prototype,"particleSystem",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],Chess:[function(t,e,n){"use strict";cc._RF.push(e,"e8c65rIuNtIyLXKcfCMMTyw","Chess");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockNode=null,e.blocks=[],e.gameInstance=null,e.type=null,e.x=null,e.y=null,e}return a(e,t),e.prototype.onLoad=function(){this.node.on("touchstart",this.onTouchstart,this)},e.prototype.onTouchstart=function(){this.gameInstance.onChessTouch(this.x,this.y,this.type,!0)},e.prototype.moveTo=function(t,e,n){void 0===n&&(n=!0),this.x=t,this.y=e,this.node.stopAllActions();var o=null;o=cc.moveTo(.3,cc.v2(this.node.width*t+this.node.width/2,this.node.height*e+this.node.height/2)),cc.tween(this.node).then(o).start(),o.setTag(1)},e.prototype.generate=function(t,e){this.node.setPosition(this.node.width*t+this.node.width/2,cc.winSize.height);var n=cc.jumpTo(.3,cc.v2(this.node.width*t+this.node.width/2,this.node.height*e+this.node.height/2),50,1);cc.tween(this.node).then(n).start(),this.setPosition(t,e)},e.prototype.clearChess=function(t){var e=this;cc.tween(this.node).to(.1,{scale:0}).call(function(t){t.destroy()}).start(),this.scheduleOnce(function(){e.gameInstance.chessEffectRoot.removeChild(t)},2)},e.prototype.clearChessWithTargetItem=function(t,e){var n=this;e.getComponent("TargetItem").checkTarget();var o=this.node.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(e.getAnchorPoint())),a=cc.v3(o.x+e.width/2,o.y+e.height/2,0);cc.tween(this.node).to(.5,{position:a,scale:.5}).call(function(t){t.destroy()}).start(),this.node.setSiblingIndex(9999),this.scheduleOnce(function(){n.gameInstance.chessEffectRoot.removeChild(t)},2)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.setType=function(t,e){void 0===e&&(e=!0),this.type=t,this.blockNode.getComponent(cc.Sprite).spriteFrame=this.blocks[t],e&&cc.tween(this.node).to(.15,{scale:.5}).to(.15,{scale:1}).start()},e.prototype.onDestroy=function(){this.node.off("touchstart",this.onTouchstart,this)},i([c(cc.Node)],e.prototype,"blockNode",void 0),i([c([cc.SpriteFrame])],e.prototype,"blocks",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],DataManager:[function(t,e,n){"use strict";cc._RF.push(e,"04769rM53dG67FoAhdH7/IL","DataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Enum"),a=function(){function t(){this._maxLevel=1,this._level=1,this._audioMusic=!0,this._audioSound=!0,this.skillNums=[1,1,1,1,1],this.skillName=["\u9524\u5b50","\u9b54\u6cd5\u68d2","\u6d17\u724c\u5361","\u70b8\u5f39"],this.status=o.ENUM_GAME_STATUS.INIT,this.currentData=null,this.rewardPropType=-1,this.rewardPropCount=-1,this.rewardGetTimes=0,this.currentColorData=[],this._diamond=0}return t.getInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},Object.defineProperty(t,"instance",{get:function(){return this.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diamond",{get:function(){return this._diamond},set:function(t){this._diamond=t,this.save()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t,this.save()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLevel",{get:function(){return this._maxLevel},set:function(t){this._maxLevel=t,this.save()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioMusic",{get:function(){return this._audioMusic},set:function(t){this._audioMusic=t,this.save()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioSound",{get:function(){return this._audioSound},set:function(t){this._audioSound=t,this.save()},enumerable:!1,configurable:!0}),t.prototype.cutSkillNums=function(t){this.skillNums[t]--,this.save()},t.prototype.reset=function(){this.status=o.ENUM_GAME_STATUS.INIT,this.currentData=null},t.prototype.save=function(){cc.sys.localStorage.setItem("KILLSTAR_STORAGE_KEY",JSON.stringify({level:this.level,maxLevel:this.maxLevel,audioMusic:this.audioMusic,audioSound:this.audioSound,skillNums:this.skillNums,diamond:this.diamond}))},t.prototype.restore=function(){var t=cc.sys.localStorage.getItem("KILLSTAR_STORAGE_KEY");try{var e=JSON.parse(t);this.level=(null==e?void 0:e.level)||1,this.maxLevel=(null==e?void 0:e.maxLevel)||1,this.audioMusic=!1!==(null==e?void 0:e.audioMusic),this.audioSound=!1!==(null==e?void 0:e.audioSound),this.skillNums=(null==e?void 0:e.skillNums)||[1,1,1,1,1],this.diamond=(null==e?void 0:e.diamond)||0}catch(n){this.level=1,this.maxLevel=1,this.audioMusic=!0,this.audioSound=!0,this.skillNums=[1,1,1,1,1],this.diamond=0,this.reset()}},t._instance=null,t}();n.default=a,cc._RF.pop()},{"../Enum":"Enum"}],Enum:[function(t,e,n){"use strict";cc._RF.push(e,"a2f51rAvdJJUrerNFnvwAbL","Enum"),Object.defineProperty(n,"__esModule",{value:!0}),n.ENUM_UI_TYPE=n.ENUM_RESOURCE_TYPE=n.ENUM_AUDIO_CLIP=n.ENUM_GAME_EVENT=n.ENUM_GAME_STATUS=void 0,function(t){t[t.INIT=0]="INIT",t[t.RUNING=1]="RUNING",t[t.UNACTIVE=2]="UNACTIVE"}(n.ENUM_GAME_STATUS||(n.ENUM_GAME_STATUS={})),function(t){t.GAME_START="GAME_START",t.GAME_RESTART="GAME_RESTART",t.GAME_NEXT="GAME_NEXT",t.GAME_LOSE="GAME_LOSE",t.GAME_WIN="GAME_WIN",t.RENDOR_TOPBAR="RENDOR_TOPBAR",t.RENDOR_PROPNUM="RENDOR_PROPNUM",t.RENDOR_STEP="RENDOR_STEP",t.RENDOR_HOME_BTN="RENDOR_HOME_BTN",t.RENDOR_REFRESH_BTN="RENDOR_REFRESH_BTN",t.REFRSH_DIAMOND="REFRSH_DIAMOND",t.REWARD_COUNT="REWARD_COUNT",t.GAME_LOSE_REASON="GAME_LOSE_REASON",t.RANDOM_PROP="RANDOM_PROP",t.BACKHOME="BACKHOME"}(n.ENUM_GAME_EVENT||(n.ENUM_GAME_EVENT={})),function(t){t.BGM="bgm1",t.BEGIN="begin",t.CLICK="click",t.CLICK2="click2",t.POP="sound_click",t.LOSE="lose",t.WIN="win",t.GOOD="good",t.GREAT="great",t.EXCELLENT="excellent",t.AMAZING="amazing",t.UNBLIEVABLE="unbelievable",t.SPELL="spell",t.BOMB="bomb",t.COLOR="color",t.DELETE="delete",t.TIMER="timer"}(n.ENUM_AUDIO_CLIP||(n.ENUM_AUDIO_CLIP={})),(n.ENUM_RESOURCE_TYPE||(n.ENUM_RESOURCE_TYPE={})).AUDIO="audio",function(t){t[t.LOADING=0]="LOADING",t[t.MENU=1]="MENU",t[t.GAME=2]="GAME",t[t.SETTING=3]="SETTING",t[t.LOSE=4]="LOSE",t[t.WIN=5]="WIN",t[t.RANK=6]="RANK",t[t.SHOP=7]="SHOP",t[t.REWARD=8]="REWARD"}(n.ENUM_UI_TYPE||(n.ENUM_UI_TYPE={})),cc._RF.pop()},{}],EventManager:[function(t,e,n){"use strict";cc._RF.push(e,"8d1d6HnXwlLdIYRo/aIQ2GO","EventManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.eventMap=new Map}return t.getInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},Object.defineProperty(t,"instance",{get:function(){return this.getInstance()},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n){this.eventMap.has(t)?this.eventMap.get(t).push({event:e,context:n}):this.eventMap.set(t,[{event:e,context:n}])},t.prototype.off=function(t,e){if(this.eventMap.has(t)){var n=this.eventMap.get(t),o=n.findIndex(function(t){return t.event==e});o>-1&&n.splice(o,1)}},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this.eventMap.has(t)){var o=this.eventMap.get(t);o.forEach(function(t){var n=t.event,o=t.context;o?n.apply(o,e):n(e)})}},t.prototype.clear=function(){this.eventMap.clear()},t._instance=null,t}();n.default=o,cc._RF.pop()},{}],GameLayer:[function(t,e,n){"use strict";cc._RF.push(e,"7eb7ewHpWlFNZgKzErI+F6w","GameLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("../manager/AudioManager"),c=t("../manager/DataManager"),u=t("../manager/EventManager"),l=t("../StaticInstance"),p=t("../Utils"),d=t("./Baselayer"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stepLabel=null,e.levelLabel=null,e.targetList=null,e.targetItemPrefab=null,e.propsNode=null,e.tipsNode=null,e.diamondLabel=null,e}return a(e,t),e.prototype.onEnable=function(){u.default.instance.on(r.ENUM_GAME_EVENT.RENDOR_TOPBAR,this.setTopbar,this),u.default.instance.on(r.ENUM_GAME_EVENT.RENDOR_PROPNUM,this.setPropNum,this),u.default.instance.on(r.ENUM_GAME_EVENT.RENDOR_STEP,this.setStep,this),u.default.instance.on(r.ENUM_GAME_EVENT.REFRSH_DIAMOND,this.setDiamind,this),u.default.instance.emit(r.ENUM_GAME_EVENT.GAME_START)},e.prototype.onSettingClick=function(){c.default.instance.status==r.ENUM_GAME_STATUS.RUNING&&(s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),l.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SETTING),u.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_HOME_BTN),u.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_REFRESH_BTN))},e.prototype.onShopClick=function(){c.default.instance.status==r.ENUM_GAME_STATUS.RUNING&&(s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),l.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SHOP))},e.prototype.onDisable=function(){u.default.instance.off(r.ENUM_GAME_EVENT.RENDOR_TOPBAR,this.setTopbar),u.default.instance.off(r.ENUM_GAME_EVENT.RENDOR_PROPNUM,this.setPropNum),u.default.instance.off(r.ENUM_GAME_EVENT.RENDOR_STEP,this.setStep),u.default.instance.off(r.ENUM_GAME_EVENT.REFRSH_DIAMOND,this.setDiamind)},e.prototype.setTopbar=function(){var t=this,e=c.default.instance,n=e.level,o=e.currentData,a=e.diamond;this.targetList.removeAllChildren(),this.levelLabel.string=String(n),this.stepLabel.string=String(o.step),this.diamondLabel.string=p.formatCoin(a),o.target.forEach(function(e){var n=cc.instantiate(t.targetItemPrefab);n.getComponent("TargetItem").init(e.type,e.num),n.name=String(e.type),t.targetList.addChild(n)})},e.prototype.setPropNum=function(){this.propsNode.children.forEach(function(t,e){var n=t.getChildByName("num"),o=t.getChildByName("ad");n.getChildByName("label").getComponent(cc.Label).string=""+c.default.instance.skillNums[e],o.active=!1,n.active=!0})},e.prototype.setDiamind=function(){var t=c.default.instance.diamond;this.diamondLabel.string=p.formatCoin(t)},e.prototype.setStep=function(){var t=c.default.instance.currentData;this.stepLabel.string=String(t.step)},e.prototype.getTargetItem=function(t){return this.targetList.getChildByName(String(t))},e.prototype.setTipsNode=function(t,e){this.tipsNode.getChildByName("Style").children.forEach(function(t,n){t.active=e===n});var n=this.tipsNode.getChildByName("Style").children[e];n.children.length&&n.children.forEach(function(t,e){t.getChildByName("checkmark").active=e===c.default.instance.currentData.propColorOneIndex}),this.tipsNode.active=t},e.prototype.setPropColorIndex=function(t,e){var n=Number(e);c.default.instance.currentData.propColorOneIndex=n;var o=t.target;o.parent.children.forEach(function(t){t.getChildByName("checkmark").active=t==o}),s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2)},i([_(cc.Label)],e.prototype,"stepLabel",void 0),i([_(cc.Label)],e.prototype,"levelLabel",void 0),i([_(cc.Node)],e.prototype,"targetList",void 0),i([_(cc.Prefab)],e.prototype,"targetItemPrefab",void 0),i([_(cc.Node)],e.prototype,"propsNode",void 0),i([_(cc.Node)],e.prototype,"tipsNode",void 0),i([_(cc.Label)],e.prototype,"diamondLabel",void 0),i([f],e)}(d.default);n.default=y,cc._RF.pop()},{"../Enum":"Enum","../StaticInstance":"StaticInstance","../Utils":"Utils","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","./Baselayer":"Baselayer"}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"915d6GjF8FJlrbcS5WkqEil","GameManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),a=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,a++)o[a]=i[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var u=t("../Enum"),l=t("./../StaticInstance"),p=t("./DataManager"),d=t("./EventManager"),h=t("../Levels"),f=t("../Utils"),_=t("./AudioManager"),y=t("./SdkManager"),E=t("./ToastManager"),g=cc._decorator,M=g.ccclass,v=g.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stage=null,e.chessBoxRoot=null,e.chessEffectRoot=null,e.chessBox=[],e.chessPrefab=null,e.chessEffectPrefab=[],e.isDeleteProp=!1,e.isColorOneProp=!1,e.isStepPauseProp=!1,e.isBombProp=!1,e.audioTimerId=-1,e.tipTime=0,e.isTipShow=!1,e.tipChessArr=[],e.showRewardTime=0,e.clickTimes=0,e.showAni=!1,e}return a(e,t),e.prototype.onLoad=function(){d.default.instance.on(u.ENUM_GAME_EVENT.GAME_START,this.onGameStart,this),d.default.instance.on(u.ENUM_GAME_EVENT.GAME_RESTART,this.onGameRestart,this),d.default.instance.on(u.ENUM_GAME_EVENT.GAME_NEXT,this.onGameNext,this),d.default.instance.on(u.ENUM_GAME_EVENT.RANDOM_PROP,this.popRandomProp,this),d.default.instance.on(u.ENUM_GAME_EVENT.BACKHOME,this.onBackHome,this),this.stage.width=cc.winSize.width-30,this.stage.height=this.chessBoxRoot.width,this.stage.setPosition(15-cc.winSize.width/2,0),this.chessBoxRoot.width=this.stage.width,this.chessBoxRoot.height=this.stage.height},e.prototype.onBackHome=function(){this.chessBoxRoot&&this.chessBoxRoot.childrenCount>0&&this.chessBoxRoot.removeAllChildren()},e.prototype.onGameStart=function(){this.initGame()},e.prototype.onGameRestart=function(){p.default.instance.reset(),this.initGame()},e.prototype.onGameNext=function(){p.default.instance.level++,p.default.instance.reset(),this.initGame()},e.prototype.initGame=function(){p.default.instance.status=u.ENUM_GAME_STATUS.INIT,p.default.instance.rewardGetTimes=0,p.default.instance.currentColorData=[],this.clickTimes=0;var t=p.default.instance.level,e=p.default.instance.currentData;if(!e){if(!(e=t>h.Levels.length?f.clone(h.Levels[h.Levels.length-1]):f.clone(h.Levels[t-1])))return;e=Object.assign({propColorOneIndex:0},e),p.default.instance.level=t,p.default.instance.currentData=e,p.default.instance.save()}d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_TOPBAR),d.default.instance.emit(u.ENUM_GAME_EVENT.REFRSH_DIAMOND),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),this.chessBoxRoot.removeAllChildren(),this.tipShowReset(),this.initData(),p.default.instance.status=u.ENUM_GAME_STATUS.RUNING},e.prototype.initData=function(){var t=p.default.instance.currentData,e=t.chessBoxWidthNum,n=t.chessBoxHeightNum,o=t.colors,a=t.cubeData,i=t.longest,r=t.colorCount;this.chessBox=this.initChessBox(e,n);var s=!1,u=[],l=[];if(a)s=!0,u=a[f.getRandom(0,4)];else{for(var d=0;d<r;d++)for(;;){var h=o[f.getRandom(0,o.length-1)];if(l.indexOf(-1==h)){l.push(h);break}}p.default.instance.currentColorData=c(l)}for(var _=0;_<this.chessBox.length;_++)for(var y=0;y<this.chessBox[0].length;y++){var E=cc.instantiate(this.chessPrefab);E.getComponent("Chess").gameInstance=this,E.width=this.chessBoxRoot.width/this.chessBox[0].length,E.height=E.width;var g=-1;for(s&&(g=u[_][y]);;){var M=[];if(s||(g=l[f.getRandom(0,l.length-1)]),E.getComponent("Chess").setType(g),E.setPosition(E.width*y+E.width/2,E.height*_+E.height/2),this.chessBox[y][_]=E,this.scanNearly(y,_,-1,-1,g,M,[]),M.length<i||s)break}E.getComponent("Chess").setPosition(y,_),this.chessBoxRoot.addChild(E)}},e.prototype.initChessBox=function(t,e){for(var n=new Array(t),o=0;o<t;o++){n[o]=new Array(e);for(var a=0;a<e;a++)n[o][a]=null}return n},e.prototype.scanNearly=function(t,e,n,o,a,i,r){if(null!=this.chessBox[t][e]){var s=!1;null==r&&(r=[]),-1==r.indexOf(t+"#"+e)&&(r.push(t+"#"+e),t>0&&(o!=e||n!=t-1)&&null!=this.chessBox[t-1][e]&&parseInt(this.chessBox[t-1][e].getComponent("Chess").type)==a&&(-1==i.indexOf(t+"#"+e)&&i.push(t+"#"+e),this.scanNearly(t-1,e,t,e,a,i,r),s=!0),t<this.chessBox[0].length-1&&(o!=e||n!=t+1)&&null!=this.chessBox[t+1][e]&&parseInt(this.chessBox[t+1][e].getComponent("Chess").type)==a&&(-1==i.indexOf(t+"#"+e)&&i.push(t+"#"+e),this.scanNearly(t+1,e,t,e,a,i,r),s=!0),e<this.chessBox.length-1&&(o!=e+1||n!=t)&&null!=this.chessBox[t][e+1]&&parseInt(this.chessBox[t][e+1].getComponent("Chess").type)==a&&(-1==i.indexOf(t+"#"+e)&&i.push(t+"#"+e),this.scanNearly(t,e+1,t,e,a,i,r),s=!0),e>0&&(o!=e-1||n!=t)&&null!=this.chessBox[t][e-1]&&parseInt(this.chessBox[t][e-1].getComponent("Chess").type)==a&&(-1==i.indexOf(t+"#"+e)&&i.push(t+"#"+e),this.scanNearly(t,e-1,t,e,a,i,r),s=!0),s||-1==n||-1==o||parseInt(this.chessBox[t][e].getComponent("Chess").type)==a&&-1==i.indexOf(t+"#"+e)&&i.push(t+"#"+e))}},e.prototype.onChessTouch=function(t,e,n){var o,a,i=this;if(!this.showAni&&p.default.instance.status==u.ENUM_GAME_STATUS.RUNING){if(this.showRewardTime=0,this.isDeleteProp)return p.default.instance.skillNums[0]-=1,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),this.isDeleteProp=!1,l.StaticInstance.uiManager.setTipsNode(!1),this.onChessDelete(t,e),this.checkGameStatus(),_.default.instance.playSound(u.ENUM_AUDIO_CLIP.DELETE),this.showAni=!0,this.unscheduleAllCallbacks(),void this.scheduleOnce(function(){i.allChessMoveDown(),i.allChessMoveLeft()},.1);if(this.isColorOneProp){var r=null===(a=null===(o=this.chessBox[t][e])||void 0===o?void 0:o.getComponent("Chess"))||void 0===a?void 0:a.type,s=p.default.instance.currentData.propColorOneIndex;return r==s?void _.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK):(p.default.instance.skillNums[1]-=1,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),this.isColorOneProp=!1,l.StaticInstance.uiManager.setTipsNode(!1),this.onChessColorChange(s,t,e),void _.default.instance.playSound(u.ENUM_AUDIO_CLIP.COLOR))}if(this.isBombProp){p.default.instance.skillNums[4]-=1,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),this.isBombProp=!1,l.StaticInstance.uiManager.setTipsNode(!1),this.onChessDelete(t,e);for(var c=0;c<this.chessBox.length;c++)for(var h=0;h<this.chessBox[0].length;h++)h==t+1&&c==e+1&&this.onChessDelete(h,c),h==t-1&&c==e-1&&this.onChessDelete(h,c),h==t+1&&c==e-1&&this.onChessDelete(h,c),h==t-1&&c==e+1&&this.onChessDelete(h,c),h==t&&c==e+1&&this.onChessDelete(h,c),h==t&&c==e-1&&this.onChessDelete(h,c),h==t+1&&c==e&&this.onChessDelete(h,c),h==t-1&&c==e&&this.onChessDelete(h,c);return this.checkGameStatus(),_.default.instance.playSound(u.ENUM_AUDIO_CLIP.BOMB),this.showAni=!0,this.unscheduleAllCallbacks(),void this.scheduleOnce(function(){i.allChessMoveDown(),i.allChessMoveLeft()},.1)}var f=[];if(this.scanNearly(t,e,-1,-1,n,f,[]),f.length>=1){for(var y in this.tipShowReset(),this.isStepPauseProp?(p.default.instance.skillNums[2]-=1,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),this.isStepPauseProp=!1,l.StaticInstance.uiManager.setTipsNode(!1),this.audioTimerId>=0&&(_.default.instance.stopSound(this.audioTimerId),this.audioTimerId=-1)):(p.default.instance.currentData.step--,this.clickTimes++),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_STEP),f)h=f[y].split("#")[0],c=f[y].split("#")[1],this.onChessDelete(h,c);if(this.checkGameStatus(),p.default.instance.status==u.ENUM_GAME_STATUS.RUNING){if(_.default.instance.playSound(u.ENUM_AUDIO_CLIP.POP),3==f.length&&_.default.instance.playSound(u.ENUM_AUDIO_CLIP.GOOD),4==f.length&&_.default.instance.playSound(u.ENUM_AUDIO_CLIP.GREAT),5==f.length&&_.default.instance.playSound(u.ENUM_AUDIO_CLIP.EXCELLENT),6==f.length&&_.default.instance.playSound(u.ENUM_AUDIO_CLIP.AMAZING),f.length>6&&_.default.instance.playSound(u.ENUM_AUDIO_CLIP.UNBLIEVABLE),f.length>=3&&p.default.instance.rewardGetTimes<1&&this.clickTimes>2){p.default.instance.rewardGetTimes++,l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.REWARD);var E=this.randomReward([4]);p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),d.default.instance.emit(u.ENUM_GAME_EVENT.REWARD_COUNT,2,E)}3==p.default.instance.currentData.step&&_.default.instance.playSound(u.ENUM_AUDIO_CLIP.SPELL)}this.showAni=!0,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){i.allChessMoveDown(),i.allChessMoveLeft()},.1)}else _.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK)}},e.prototype.onChessDelete=function(t,e){if(this.chessBox[t][e]){var n=this.chessBox[t][e].getComponent("Chess").type,o=cc.instantiate(this.chessEffectPrefab[n]);o.setPosition(this.chessBox[t][e].getPosition()),this.chessEffectRoot.addChild(o),o.getComponent("ChessEffect").play(),this.chessBox[t][e].getComponent("Chess").clearChess(o),this.chessBox[t][e]=null}},e.prototype.onChessColorChange=function(t,e,n){if(void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),e>=0&&n>=0)null==(i=this.chessBox[e][n])||i.getComponent("Chess").setType(t);else for(var o=0;o<this.chessBox.length;o++)for(var a=0;a<this.chessBox[0].length;a++){var i;null==(i=this.chessBox[a][o])||i.getComponent("Chess").setType(t)}},e.prototype.checkGameStatus=function(){if(p.default.instance.save(),p.default.instance.status==u.ENUM_GAME_STATUS.RUNING){for(var t=p.default.instance.currentData,e=(t.target,t.step),n=t.rewardCount,o=!1,a=0;a<this.chessBox.length;a++){for(var i=0;i<this.chessBox[a].length;i++)if(this.chessBox[i][a]){o=!0;break}if(o)break}if(!o&&e>=0){var r=p.default.instance.level+1;r>h.Levels.length&&(r=h.Levels.length),p.default.instance.status=u.ENUM_GAME_STATUS.UNACTIVE,_.default.instance.playSound(u.ENUM_AUDIO_CLIP.WIN),l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.WIN);var s=this.randomReward([0,1,3]);p.default.instance.skillNums[s]+=n||1,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM),d.default.instance.emit(u.ENUM_GAME_EVENT.REWARD_COUNT,n||1,s),r>p.default.instance.maxLevel&&(p.default.instance.maxLevel=r,y.default.instance.setRank(r))}else e<=0&&(p.default.instance.status=u.ENUM_GAME_STATUS.UNACTIVE,_.default.instance.playSound(u.ENUM_AUDIO_CLIP.LOSE),l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.LOSE),d.default.instance.emit(u.ENUM_GAME_EVENT.GAME_LOSE_REASON,"\u6ca1\u6709\u53ef\u4f7f\u7528\u6b65\u6570\u4e86"))}},e.prototype.allChessMoveDown=function(){for(var t=0;t<this.chessBox[0].length;t++)for(var e=0;e<this.chessBox.length;e++)if(null==this.chessBox[e][t])for(var n=t;n<this.chessBox[0].length;n++)if(null!=this.chessBox[e][n+1]){this.chessBox[e][t]=this.chessBox[e][n+1],this.chessBox[e][n+1]=null,this.chessBox[e][t].getComponent("Chess").moveTo(e,t);break}if(p.default.instance.currentData.loop)for(t=0;t<this.chessBox.length;t++)for(e=0;e<this.chessBox[0].length;e++)if(null==this.chessBox[e][t]){var o=cc.instantiate(this.chessPrefab);o.getComponent("Chess").gameInstance=this,o.width=this.chessBoxRoot.width/this.chessBox[0].length,o.height=o.width;var a=f.getRandom(0,4);o.getComponent("Chess").setType(a,!1),o.getComponent("Chess").generate(e,t),this.chessBox[e][t]=o,this.chessBoxRoot.addChild(o)}},e.prototype.allChessMoveLeft=function(){for(var t=this,e=function(e){for(var n=!0,o=0;o<t.chessBox[0].length;o++)(null!=t.chessBox[e][o]||e>=t.chessBox.length-1)&&(n=!1);return n},n=function(e){for(var n=e;n<t.chessBox.length-1;n++)for(var o=0;o<t.chessBox[0].length;o++)n!=t.chessBox.length&&(t.chessBox[n][o]=t.chessBox[n+1][o],t.chessBox[n+1][o]=null,cc.isValid(t.chessBox[n][o])&&t.chessBox[n][o].getComponent("Chess").moveTo(n,o))},o=this.chessBox.length-1;o>=0;o--)e(o)&&n(o);this.tipShow(!0),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.showAni=!1},.3)},e.prototype.onPropDelete=function(){p.default.instance.status==u.ENUM_GAME_STATUS.RUNING&&(_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2),p.default.instance.skillNums[0]>0?(l.StaticInstance.uiManager.setTipsNode(!0,0),this.isDeleteProp=!0,this.isColorOneProp=!1,this.isStepPauseProp=!1,this.isBombProp=!1):l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.SHOP))},e.prototype.onPropColorOne=function(){p.default.instance.status==u.ENUM_GAME_STATUS.RUNING&&(_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2),p.default.instance.skillNums[1]>0?(l.StaticInstance.uiManager.setTipsNode(!0,1),this.isDeleteProp=!1,this.isColorOneProp=!0,this.isStepPauseProp=!1,this.isBombProp=!1):l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.SHOP))},e.prototype.onPropStepPause=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return p.default.instance.status!=u.ENUM_GAME_STATUS.RUNING?[2]:(_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2),p.default.instance.skillNums[2]>0?(l.StaticInstance.uiManager.setTipsNode(!0,2),this.isDeleteProp=!1,this.isColorOneProp=!1,this.isStepPauseProp=!0,this.isBombProp=!1,t=this,[4,_.default.instance.playSound(u.ENUM_AUDIO_CLIP.TIMER,!0)]):[3,2]);case 1:return t.audioTimerId=e.sent(),[3,3];case 2:l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.SHOP),e.label=3;case 3:return[2]}})})},e.prototype.onPropShuffle=function(){if(p.default.instance.status==u.ENUM_GAME_STATUS.RUNING){_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2);var t=p.default.instance.currentData,e=(t.colors,t.cubeData);if(p.default.instance.skillNums[3]>0){p.default.instance.skillNums[3]-=1,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.RENDOR_PROPNUM);var n=[];e&&(n=e[f.getRandom(0,4)]);for(var o=0;o<this.chessBox.length;o++)for(var a=0;a<this.chessBox[0].length;a++)if(n.length>0){var i=n[o][a];this.onChessColorChange(i,a,o)}else{var r=f.getRandom(0,p.default.instance.currentColorData.length-1);i=p.default.instance.currentColorData[r],this.onChessColorChange(i,a,o)}}else l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.SHOP)}},e.prototype.onPropBomb=function(){p.default.instance.status==u.ENUM_GAME_STATUS.RUNING&&(_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2),p.default.instance.skillNums[4]>0?(l.StaticInstance.uiManager.setTipsNode(!0,3),this.isDeleteProp=!1,this.isColorOneProp=!1,this.isStepPauseProp=!1,this.isBombProp=!0):l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.SHOP))},e.prototype.onPropSkillCancel=function(){_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2),this.isDeleteProp&&(this.isDeleteProp=!1),this.isColorOneProp&&(this.isColorOneProp=!1),this.isStepPauseProp&&(this.isStepPauseProp=!1,this.audioTimerId>=0&&(_.default.instance.stopSound(this.audioTimerId),this.audioTimerId=-1)),this.isBombProp&&(this.isBombProp=!1),l.StaticInstance.uiManager.setTipsNode(!1)},e.prototype.onGetDiamondByAD=function(){_.default.instance.playSound(u.ENUM_AUDIO_CLIP.CLICK2),y.default.instance.showVideoAd(function(){p.default.instance.diamond+=100,p.default.instance.save(),d.default.instance.emit(u.ENUM_GAME_EVENT.REFRSH_DIAMOND),E.default.instance.show("\u5df2\u53d1\u653e\u6280\u80fd\u70b9")},function(){E.default.instance.show("\u89c6\u9891\u64ad\u653e\u4e2d\u65ad")})},e.prototype.gameWinReward=function(){p.default.instance.level},e.prototype.randomReward=function(t){return t[f.getRandom(0,t.length-1)]},e.prototype.tipShow=function(t){var e,n,o=this;if(void 0===t&&(t=!1),p.default.instance.status==u.ENUM_GAME_STATUS.RUNING&&!this.isTipShow){this.isTipShow=!0;for(var a=0;a<this.chessBox.length;a++){for(var i=0;i<this.chessBox[0].length;i++){var r=null===(n=null===(e=this.chessBox[i][a])||void 0===e?void 0:e.getComponent("Chess"))||void 0===n?void 0:n.type;if(this.scanNearly(i,a,-1,-1,r,this.tipChessArr,[]),this.tipChessArr.length>=1)break}if(this.tipChessArr.length>=1)break}0==this.tipChessArr.length&&(p.default.instance.status=u.ENUM_GAME_STATUS.UNACTIVE,_.default.instance.playSound(u.ENUM_AUDIO_CLIP.LOSE),l.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.LOSE),d.default.instance.emit(u.ENUM_GAME_EVENT.GAME_LOSE_REASON,"\u6ca1\u6709\u53ef\u4ee5\u6d88\u9664\u7684\u4e86")),t||this.tipChessArr.forEach(function(t){var e=t.split("#")[0],n=t.split("#")[1];if(o.chessBox[e][n]){var a=o.chessBox[e][n],i=cc.scaleTo(.4,.8),r=cc.scaleTo(.4,1);cc.tween(a).sequence(i,r).repeatForever().start()}})}},e.prototype.tipShowReset=function(){var t=this;this.tipChessArr.forEach(function(e){var n=e.split("#")[0],o=e.split("#")[1];if(t.chessBox[n][o]){var a=t.chessBox[n][o];a.stopAllActions(),a.scale=1}}),this.tipTime=0,this.isTipShow=!1,this.tipChessArr=[]},e.prototype.onDestroy=function(){d.default.instance.off(u.ENUM_GAME_EVENT.GAME_START,this.onGameStart),d.default.instance.off(u.ENUM_GAME_EVENT.GAME_RESTART,this.onGameRestart),d.default.instance.off(u.ENUM_GAME_EVENT.GAME_NEXT,this.onGameNext),d.default.instance.off(u.ENUM_GAME_EVENT.RANDOM_PROP,this.popRandomProp),d.default.instance.off(u.ENUM_GAME_EVENT.BACKHOME,this.onBackHome)},e.prototype.popRandomProp=function(){var t=this.randomReward([0,1,3,4]);p.default.instance.skillNums[t]+=1;var e=p.default.instance.skillName[t];E.default.instance.show("\u83b7\u5f97\u9053\u5177"+e+"X1")},e.prototype.update=function(){p.default.instance.status==u.ENUM_GAME_STATUS.RUNING&&(this.tipTime++,this.tipTime>=300&&(this.tipTime=0,this.tipShow()))},i([v(cc.Node)],e.prototype,"stage",void 0),i([v(cc.Node)],e.prototype,"chessBoxRoot",void 0),i([v(cc.Node)],e.prototype,"chessEffectRoot",void 0),i([v(cc.Prefab)],e.prototype,"chessPrefab",void 0),i([v([cc.Prefab])],e.prototype,"chessEffectPrefab",void 0),i([M],e)}(cc.Component);n.default=N,cc._RF.pop()},{"../Enum":"Enum","../Levels":"Levels","../Utils":"Utils","./../StaticInstance":"StaticInstance","./AudioManager":"AudioManager","./DataManager":"DataManager","./EventManager":"EventManager","./SdkManager":"SdkManager","./ToastManager":"ToastManager"}],Index:[function(t,e,n){"use strict";cc._RF.push(e,"893a9nYd9VCOq4fcDQbCaCJ","Index");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./StaticInstance"),u=t("./Enum"),l=t("./manager/AudioManager"),p=t("./manager/DataManager"),d=t("./manager/ResourceManager"),h=t("./manager/SdkManager"),f=cc._decorator,_=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,d.default.instance.loadRes(u.ENUM_RESOURCE_TYPE.AUDIO)];case 1:return t.sent(),p.default.instance.restore(),l.default.instance.playMusic(),h.default.instance.passiveShare(),h.default.instance.getRank(),h.default.instance.initBannerAd(),h.default.instance.initInterstitialAd(),h.default.instance.initVideoAd(),c.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.LOADING,!1),c.StaticInstance.uiManager.toggle(u.ENUM_UI_TYPE.MENU,!0),[2]}})})},i([_],e)}(cc.Component));n.default=y,cc._RF.pop()},{"./Enum":"Enum","./StaticInstance":"StaticInstance","./manager/AudioManager":"AudioManager","./manager/DataManager":"DataManager","./manager/ResourceManager":"ResourceManager","./manager/SdkManager":"SdkManager"}],Levels:[function(t,e,n){"use strict";cc._RF.push(e,"02f630aAiRC1rdMzFlYxRQu","Levels"),Object.defineProperty(n,"__esModule",{value:!0}),n.Levels=void 0,n.Levels=[{step:5,colorCount:4,target:[{type:0,num:2},{type:1,num:2},{type:3,num:2}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[1,2,3,4],loop:!1,cubeData:[[[1,1,1,1,2,2,3,3,4,4],[1,1,1,1,2,2,3,3,4,4],[1,1,1,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[1,2,2,3,3,3,3,4,4,4],[2,2,2,3,3,3,3,4,4,4],[2,2,3,3,3,3,3,4,4,4],[3,3,3,3,3,3,3,4,4,4],[1,1,1,1,3,3,4,4,4,4],[1,1,1,1,4,4,4,4,4,4]],[[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0],[4,4,4,4,0,0,0,0,0,0],[4,4,4,4,0,0,0,0,0,0],[4,4,4,4,0,0,0,0,0,0],[2,2,2,2,2,0,0,3,3,3],[2,2,2,0,0,0,0,3,3,3],[2,2,2,0,0,0,0,3,3,3]],[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,3,3,3,3,3],[2,2,2,2,2,3,3,3,3,3],[2,2,2,2,2,3,3,3,3,3],[2,2,2,2,2,3,3,3,3,3],[4,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,4,4],[1,1,1,1,1,1,1,1,4,4],[1,1,2,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,3,2,2,2],[1,1,0,0,1,1,3,2,2,2],[1,1,1,1,1,1,3,2,2,2],[4,4,4,4,4,3,3,3,3,3],[4,4,4,4,4,3,3,3,3,3],[4,4,4,4,4,3,3,3,3,3],[4,4,4,4,4,3,3,3,3,3]]],longest:7,rewardCount:1},{step:5,colorCount:4,target:[{type:1,num:10},{type:2,num:10},{type:3,num:10}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[0,1,2,3,4],loop:!1,cubeData:[[[1,1,1,1,2,2,3,3,4,4],[1,1,1,1,2,2,3,3,4,4],[1,1,1,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[1,2,2,3,3,3,3,4,4,4],[2,2,2,3,3,3,3,4,4,4],[2,2,3,3,3,3,3,4,4,4],[3,3,3,3,3,3,3,4,4,4],[1,1,1,1,3,3,4,4,4,4],[1,1,1,1,4,4,4,4,4,4]],[[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0],[4,4,4,4,0,0,0,0,0,0],[4,4,4,4,0,0,0,0,0,0],[4,4,4,4,0,0,0,0,0,0],[2,2,2,2,2,0,0,3,3,3],[2,2,2,0,0,0,0,3,3,3],[2,2,2,0,0,0,0,3,3,3]],[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,3,3,3,3,3],[2,2,2,2,2,3,3,3,3,3],[2,2,2,2,2,3,3,3,3,3],[2,2,2,2,2,3,3,3,3,3],[4,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,1,1,1,1,1],[4,4,4,4,4,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,4,4],[1,1,1,1,1,1,1,1,4,4],[1,1,2,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[1,1,2,2,2,3,3,3,4,4],[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,1],[1,1,0,0,1,1,3,2,2,2],[1,1,0,0,1,1,3,2,2,2],[1,1,1,1,1,1,3,2,2,2],[4,4,4,4,4,3,3,3,3,3],[4,4,4,4,4,3,3,3,3,3],[4,4,4,4,4,3,3,3,3,3],[4,4,4,4,4,3,3,3,3,3]]],longest:100},{step:8,colorCount:4,target:[{type:0,num:20},{type:2,num:20},{type:4,num:20}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[0,1,2,3,4],cubeData:[[[1,1,1,1,1,2,2,2,2,2],[1,1,1,1,1,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1],[1,1,1,1,0,0,0,1,1,1],[3,3,3,3,3,3,3,4,4,4],[1,1,1,1,1,1,4,4,4,4],[0,0,0,0,0,0,4,4,4,4],[2,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,1,1]],[[2,2,1,1,2,2,2,2,2,2],[2,2,1,1,2,2,2,2,2,2],[2,2,1,1,2,2,2,2,2,2],[2,2,1,1,2,2,2,2,2,2],[2,2,1,1,1,1,1,1,1,1],[2,2,1,1,2,2,2,2,2,2],[2,2,1,1,0,0,3,3,3,3],[2,2,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3],[3,3,3,3,3,3,2,2,2,2]],[[1,1,1,1,1,1,1,1,0,0],[1,1,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,2,2,2],[3,3,3,3,2,2,2,2,2,2],[3,3,3,4,2,2,2,3,3,3],[3,3,3,4,3,3,3,3,1,1],[3,3,3,4,1,1,1,1,1,1],[1,1,1,4,1,1,4,4,4,4],[4,4,4,4,1,1,4,4,4,4]],[[1,1,4,4,3,3,0,0,2,2],[4,4,4,4,3,3,0,0,2,2],[3,3,3,3,3,3,0,0,2,2],[0,0,0,0,0,0,0,0,2,2],[2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0],[4,4,4,4,4,4,2,2,2,2],[3,3,3,3,3,3,4,4,4,4],[4,4,4,4,3,3,3,3,3,3]],[[1,1,3,3,4,4,4,2,2,2],[1,1,3,3,4,4,4,4,4,4],[1,1,3,3,2,2,2,2,2,2],[1,1,3,3,2,4,4,4,1,1],[1,1,3,3,1,1,1,1,1,1],[2,2,3,3,3,3,3,3,3,2],[4,4,0,0,4,4,4,2,2,2],[4,4,0,0,4,4,4,1,1,1],[4,4,0,0,3,3,3,3,3,2],[0,0,0,0,2,2,2,3,2,2]]],loop:!1,longest:100},{step:10,colorCount:4,target:[{type:0,num:20},{type:2,num:20},{type:1,num:20},{type:3,num:20}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[0,1,2,3,4],cubeData:[[[1,1,2,2,2,1,1,1,1,1],[1,1,2,2,1,1,4,4,1,1],[1,1,1,1,1,1,2,2,2,2],[3,3,0,0,0,1,3,3,2,2],[4,4,0,0,0,4,4,4,2,2],[3,3,2,2,2,2,3,3,3,3],[2,2,2,2,4,4,4,4,1,1],[3,3,2,2,2,2,1,1,1,1],[3,3,3,3,3,3,1,4,4,4],[2,2,2,2,3,3,1,1,1,1]],[[2,2,2,3,3,3,1,1,1,1],[3,3,3,2,2,2,4,4,4,0],[1,1,1,1,0,0,0,0,0,0],[2,2,2,2,2,2,1,1,1,1],[4,4,4,3,3,3,3,3,2,2],[0,0,0,4,4,2,2,2,2,2],[0,0,0,0,2,2,2,3,3,3],[2,2,3,3,4,4,3,3,3,3],[2,2,0,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1]],[[0,0,0,1,1,1,2,2,2,4],[2,2,2,4,4,3,3,3,4,4],[3,3,2,2,3,3,3,4,4,2],[3,3,2,2,2,1,1,2,2,2],[4,4,4,4,0,0,1,1,1,1],[1,1,3,3,3,0,0,0,2,2],[1,1,4,4,3,3,3,2,2,2],[0,0,1,1,3,2,2,1,1,1],[4,4,2,2,2,1,0,0,0,0],[0,0,1,1,3,3,3,3,2,2]],[[4,4,4,4,0,2,2,2,3,3],[3,3,3,4,0,2,2,2,3,3],[2,2,2,4,4,2,3,3,3,1],[0,0,0,3,3,0,0,1,1,1],[1,1,1,4,4,4,1,2,2,2],[2,2,2,2,2,3,3,1,1,1],[3,3,3,2,2,2,3,1,1,1],[2,2,2,1,1,1,3,3,1,1],[0,0,0,1,0,0,3,4,4,2],[1,1,1,1,0,3,3,4,2,2]],[[1,1,3,3,4,4,4,2,2,2],[1,1,3,3,4,4,4,4,4,4],[1,1,3,3,2,2,2,2,2,2],[1,1,3,3,2,4,4,4,1,1],[1,1,3,3,1,1,1,1,1,1],[2,2,3,3,3,3,3,3,3,2],[4,4,0,0,4,4,4,2,2,2],[4,4,0,0,4,4,4,1,1,1],[4,4,0,0,3,3,3,3,3,2],[0,0,0,0,2,2,2,3,2,2]]],loop:!1,longest:100},{step:10,colorCount:2,target:[{type:0,num:20},{type:2,num:20},{type:1,num:20},{type:3,num:20}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[0,1,2,3,4],loop:!1,longest:50},{step:20,colorCount:3,target:[{type:0,num:20},{type:2,num:20},{type:1,num:20},{type:3,num:20}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[0,1,2,3,4],loop:!1,longest:50},{step:30,colorCount:4,target:[{type:4,num:50},{type:0,num:30},{type:2,num:50},{type:1,num:30}],chessBoxWidthNum:10,chessBoxHeightNum:10,colors:[0,1,2,3,4],loop:!1,longest:30}],cc._RF.pop()},{}],LoadingLayer:[function(t,e,n){"use strict";cc._RF.push(e,"ba991v0IllBTZ/PZSDNkrkl","LoadingLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Baselayer"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),i([c],e)}(r.default));n.default=u,cc._RF.pop()},{"./Baselayer":"Baselayer"}],LoseLayer:[function(t,e,n){"use strict";cc._RF.push(e,"05e85QD6N1JRpDnkCgnIhOC","LoseLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("./../StaticInstance"),c=t("../manager/AudioManager"),u=t("./Baselayer"),l=t("../manager/EventManager"),p=t("../manager/SdkManager"),d=t("../manager/DataManager"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleLabel=null,e}return a(e,t),e.prototype.onEnable=function(){l.default.instance.on(r.ENUM_GAME_EVENT.GAME_LOSE_REASON,this.setLoseTitle,this)},e.prototype.onDisable=function(){l.default.instance.off(r.ENUM_GAME_EVENT.GAME_LOSE_REASON,this.setLoseTitle)},e.prototype.setLoseTitle=function(t){this.titleLabel.string=t+", \u6311\u6218\u5931\u8d25"},e.prototype.onRestartClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.LOSE,!1),l.default.instance.emit(r.ENUM_GAME_EVENT.GAME_RESTART)},e.prototype.onShareClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),p.default.instance.activeShare()},e.prototype.onHomeClick=function(){d.default.instance.reset(),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.GAME,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.LOSE,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.MENU,!0)},i([_(cc.Label)],e.prototype,"titleLabel",void 0),i([f],e)}(u.default);n.default=y,cc._RF.pop()},{"../Enum":"Enum","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/SdkManager":"SdkManager","./../StaticInstance":"StaticInstance","./Baselayer":"Baselayer"}],MenuLayer:[function(t,e,n){"use strict";cc._RF.push(e,"00762gPostDGp/BLnCjnO9q","MenuLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("./../StaticInstance"),c=t("../manager/AudioManager"),u=t("./Baselayer"),l=t("../manager/DataManager"),p=t("../manager/EventManager"),d=t("../manager/SdkManager"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startNode=null,e.goonNode=null,e}return a(e,t),e.prototype.onEnable=function(){this.startNode.active=!0,l.default.instance.status=r.ENUM_GAME_STATUS.UNACTIVE,p.default.instance.emit(r.ENUM_GAME_EVENT.BACKHOME),d.default.instance.toggleBannerAd(!0)},e.prototype.onDisable=function(){d.default.instance.toggleBannerAd(!1)},e.prototype.onStartClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.MENU,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.GAME)},e.prototype.onRankClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.RANK)},e.prototype.onSettingClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SETTING),p.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_HOME_BTN,!1),p.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_REFRESH_BTN,!1)},i([_(cc.Node)],e.prototype,"startNode",void 0),i([_(cc.Node)],e.prototype,"goonNode",void 0),i([f],e)}(u.default);n.default=y,cc._RF.pop()},{"../Enum":"Enum","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/SdkManager":"SdkManager","./../StaticInstance":"StaticInstance","./Baselayer":"Baselayer"}],RankLayer:[function(t,e,n){"use strict";cc._RF.push(e,"fb82c5akdZDqKskGCWO6ras","RankLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("../manager/AudioManager"),c=t("../manager/SdkManager"),u=t("../StaticInstance"),l=t("./Baselayer"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEnable=function(){c.default.instance.showInterstitialAd(),c.default.instance.getRank()},e.prototype.onCloseClick=function(){s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK),u.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.RANK,!1)},i([d],e)}(l.default));n.default=h,cc._RF.pop()},{"../Enum":"Enum","../StaticInstance":"StaticInstance","../manager/AudioManager":"AudioManager","../manager/SdkManager":"SdkManager","./Baselayer":"Baselayer"}],ResourceManager:[function(t,e,n){"use strict";cc._RF.push(e,"cd5a0+/scFFvpzDHA8sl76v","ResourceManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,i){function r(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./../Enum"),r=function(){function t(){this.clipMap={}}return t.getInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},Object.defineProperty(t,"instance",{get:function(){return this.getInstance()},enumerable:!1,configurable:!0}),t.prototype.loadRes=function(t){return o(this,void 0,void 0,function(){var e=this;return a(this,function(){return[2,new Promise(function(n,o){switch(t){case i.ENUM_RESOURCE_TYPE.AUDIO:cc.resources.loadDir("audio",cc.AudioClip,function(t,a){var i;t&&o&&o();for(var r=0;r<a.length;r++)i=a[r],e.clipMap[i.name]||(e.clipMap[i.name]=i);n&&n()})}})]})})},t.prototype.getClip=function(t){return this.clipMap[t]},t._instance=null,t}();n.default=r,cc._RF.pop()},{"./../Enum":"Enum"}],RewardLayer:[function(t,e,n){"use strict";cc._RF.push(e,"01998SRomxOELTEcAVUSv4O","RewardLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("../manager/AudioManager"),c=t("../manager/DataManager"),u=t("../manager/EventManager"),l=t("../manager/SdkManager"),p=t("../manager/ToastManager"),d=t("../StaticInstance"),h=t("./Baselayer"),f=cc._decorator,_=f.ccclass,y=f.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propCountLabel=null,e.propIcon=null,e.propType=-1,e.propCount=-1,e}return a(e,t),e.prototype.onEnable=function(){u.default.instance.on(r.ENUM_GAME_EVENT.REWARD_COUNT,this.setPropReward,this)},e.prototype.onDisable=function(){u.default.instance.off(r.ENUM_GAME_EVENT.REWARD_COUNT,this.setPropReward)},e.prototype.onCloseClick=function(){s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),d.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.REWARD,!1)},e.prototype.setPropReward=function(t,e){var n=this;this.propCount=t,this.propType=e,this.propCountLabel.string="X"+t,this.propIcon.node.scale=4==e?2:1,cc.resources.load("prop/prop"+e,cc.SpriteFrame,function(t,e){cc.isValid(n.node)&&(n.propIcon.spriteFrame=e)})},e.prototype.onGetReward=function(){s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),c.default.instance.rewardPropCount=this.propCount,c.default.instance.rewardPropType=this.propType,l.default.instance.showVideoAd(function(){c.default.instance.skillNums[c.default.instance.rewardPropType]+=c.default.instance.rewardPropCount,c.default.instance.rewardPropCount=-1,c.default.instance.rewardPropType=-1,c.default.instance.save(),u.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_PROPNUM),d.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.REWARD,!1),p.default.instance.show("\u5df2\u53d1\u653e\u6280\u80fd\u70b9")},function(){c.default.instance.rewardPropCount=-1,c.default.instance.rewardPropType=-1,p.default.instance.show("\u89c6\u9891\u64ad\u653e\u4e2d\u65ad")})},i([y(cc.Label)],e.prototype,"propCountLabel",void 0),i([y(cc.Sprite)],e.prototype,"propIcon",void 0),i([_],e)}(h.default);n.default=E,cc._RF.pop()},{"../Enum":"Enum","../StaticInstance":"StaticInstance","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/SdkManager":"SdkManager","../manager/ToastManager":"ToastManager","./Baselayer":"Baselayer"}],SdkManager:[function(t,e,n){"use strict";cc._RF.push(e,"7b5c4dSei9Ohbdix/W33Fd+","SdkManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.shareMsg="\u597d\u53ef\u60dc\uff0c\u5c31\u5dee\u4e00\u70b9\u70b9\uff0c\u53ef\u4ee5\u5e2e\u6211\u8fc7\u5173\u4e48\uff1f",this.videoId="id5s00bfo0137g63gg",this.videoAd=null,this.interstitialId="2859iho937hf11kcug",this.interstitialAd=null,this.bannerId="60122jh6d9d136oqtn",this.bannerAd=null,this.showBanner=!1,this.winSize=null}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.activeShare=function(){cc.sys.platform!=cc.sys.WECHAT_GAME?cc.sys.platform!=cc.sys.BYTEDANCE_GAME?console.log("\u3010\u4e3b\u52a8\u5206\u4eab\u3011\u4ec5\u652f\u6301\u5fae\u4fe1/\u6296\u97f3\u5e73\u53f0!"):tt.shareAppMessage({title:this.shareMsg}):wx.shareAppMessage({title:this.shareMsg})},t.prototype.passiveShare=function(){var t=this;cc.sys.platform==cc.sys.WECHAT_GAME?(wx.showShareMenu({success:function(){},fail:function(){}}),wx.onShareAppMessage(function(){return{title:t.shareMsg}})):console.log("\u3010\u88ab\u52a8\u5206\u4eab\u3011\u4ec5\u652f\u6301\u5fae\u4fe1\u5e73\u53f0!")},t.prototype.turnToApp=function(t){cc.sys.platform==cc.sys.WECHAT_GAME?wx.navigateToMiniProgram({appId:t}):console.log("\u3010\u7a0b\u5e8f\u8df3\u8f6c\u3011\u4ec5\u652f\u6301\u5fae\u4fe1\u5e73\u53f0!",t)},t.prototype.initBannerAd=function(){var t=this;if(cc.sys.platform!=cc.sys.WECHAT_GAME){if(cc.sys.platform==cc.sys.BYTEDANCE_GAME)return""==this.bannerId?void console.log("\u3010\u6d41\u91cf\u4e3b\u3011\u8bf7\u914d\u7f6e\u6a2a\u5e45\u5e7f\u544aID"):void(null==this.bannerAd&&(this.bannerAd=tt.createBannerAd({adUnitId:this.bannerId,adIntervals:30,style:{width:cc.winSize.height}}),this.bannerAd.onError(function(t){console.error("\u3010tt\u6d41\u91cf\u4e3b\u6a2a\u5e45\u3011\u521d\u59cb\u5316\u6709\u8bef",t)}),this.bannerAd.onError(function(t){console.error("\u3010tt\u6d41\u91cf\u4e3b\u6a2a\u5e45\u3011\u521d\u59cb\u5316\u6709\u8bef",t)}),this.bannerAd.onLoad(function(){t.showBanner&&t.bannerAd.show().then(function(){console.log("\u3010tt\u6d41\u91cf\u4e3b\u6a2a\u5e45\u3011\u52a0\u8f7d\u6210\u529f!")})})));console.log("\u3010\u6d41\u91cf\u4e3b\u6a2a\u5e45\u521d\u59cb\u5316\u3011\u4ec5\u652f\u6301\u5fae\u4fe1/\u6296\u97f3\u5e73\u53f0!")}else{if(""==this.bannerId)return void console.log("\u3010\u6d41\u91cf\u4e3b\u3011\u8bf7\u914d\u7f6e\u6a2a\u5e45\u5e7f\u544aID");var e=wx.getSystemInfoSync();null==this.bannerAd&&(this.bannerAd=wx.createBannerAd({adUnitId:this.bannerId,adIntervals:10,style:{height:e.windowHeight-80,left:0,top:500,width:e.windowWidth}}),this.bannerAd.onResize(function(){t.bannerAd.style.top=e.windowHeight-t.bannerAd.style.realHeight,t.bannerAd.style.left=e.windowWidth/2-t.bannerAd.style.realWidth/2}),this.bannerAd.onError(function(){console.error("\u3010wx\u6d41\u91cf\u4e3b\u6a2a\u5e45\u3011\u521d\u59cb\u5316\u6709\u8bef")}))}},t.prototype.toggleBannerAd=function(t){var e;cc.sys.platform!=cc.sys.WECHAT_GAME?cc.sys.platform!=cc.sys.BYTEDANCE_GAME?console.log("\u3010\u6d41\u91cf\u4e3b\u6a2a\u5e45\u3011\u4ec5\u652f\u6301\u5fae\u4fe1/\u6296\u97f3\u5e73\u53f0!"):this.bannerId?(this.showBanner=t,t?this.bannerAd.show().then(function(){console.log("\u3010tt\u6d41\u91cf\u4e3b\u6a2a\u5e45\u3011\u52a0\u8f7d\u6210\u529f!")}):null===(e=this.bannerAd)||void 0===e||e.hide()):this.initBannerAd():this.bannerAd&&(t?this.bannerAd.show():this.bannerAd.hide())},t.prototype.initInterstitialAd=function(){var t;return cc.sys.platform==cc.sys.WECHAT_GAME?""==this.interstitialId?void console.log("\u3010\u6d41\u91cf\u4e3b\u3011\u8bf7\u914d\u7f6e\u63d2\u5c4f\u5e7f\u544aID"):void(null==this.interstitialAd&&(this.interstitialAd=wx.createInterstitialAd({adUnitId:this.interstitialId}),this.interstitialAd.onError(function(){console.error("\u3010\u6d41\u91cf\u4e3b\u63d2\u5c4f\u3011\u521d\u59cb\u5316\u6709\u8bef")}))):cc.sys.platform==cc.sys.BYTEDANCE_GAME?""==this.interstitialId?void console.log("\u3010\u6d41\u91cf\u4e3b\u3011\u8bf7\u914d\u7f6e\u63d2\u5c4f\u5e7f\u544aID"):void(null==this.interstitialAd&&(this.interstitialAd=tt.createInterstitialAd({adUnitId:this.interstitialId}),null===(t=this.interstitialAd)||void 0===t||t.onError(function(t){console.error("\u3010\u6d41\u91cf\u4e3b\u63d2\u5c4f\u3011\u521d\u59cb\u5316\u6709\u8bef",t)}))):void console.log("\u3010\u6d41\u91cf\u4e3b\u63d2\u5c4f\u521d\u59cb\u5316\u3011\u4ec5\u652f\u6301\u5fae\u4fe1/\u6296\u97f3\u5e73\u53f0!")},t.prototype.showInterstitialAd=function(){cc.sys.platform==cc.sys.WECHAT_GAME||cc.sys.platform==cc.sys.BYTEDANCE_GAME?this.interstitialAd&&this.interstitialAd.show().catch(function(t){console.error("\u3010\u6d41\u91cf\u4e3b\u63d2\u5c4f\u3011\u52a0\u8f7d\u5931\u8d25",t)}):console.log("\u3010\u6d41\u91cf\u4e3b\u63d2\u5c4f\u3011\u4ec5\u652f\u6301\u5fae\u4fe1\u5e73\u53f0!")},t.prototype.initVideoAd=function(){return cc.sys.platform==cc.sys.WECHAT_GAME?""==this.videoId?void console.log("\u3010\u6d41\u91cf\u4e3b\u3011\u8bf7\u914d\u7f6e\u6fc0\u52b1\u89c6\u9891\u5e7f\u544aID"):void(null==this.videoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:this.videoId}),this.videoAd.onError(function(){console.error("\u3010\u6d41\u91cf\u4e3b\u6fc0\u52b1\u3011\u521d\u59cb\u5316\u6709\u8bef")}))):cc.sys.platform==cc.sys.BYTEDANCE_GAME?""==this.videoId?void console.log("\u3010\u6d41\u91cf\u4e3b\u3011\u8bf7\u914d\u7f6e\u6fc0\u52b1\u89c6\u9891\u5e7f\u544aID"):void(null==this.videoAd&&(this.videoAd=tt.createRewardedVideoAd({adUnitId:this.videoId}),this.videoAd.onError(function(){console.error("\u3010\u6d41\u91cf\u4e3b\u6fc0\u52b1\u3011\u521d\u59cb\u5316\u6709\u8bef")}))):void console.log("\u3010\u6d41\u91cf\u4e3b\u6fc0\u52b1\u521d\u59cb\u5316\u3011\u4ec5\u652f\u6301\u5fae\u4fe1/\u6296\u97f3\u5e73\u53f0!")},t.prototype.showVideoAd=function(t,e){var n=this;return cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME?(console.log("\u6fc0\u52b1\u6a21\u62df\u6210\u529f1"),t&&t()):this.videoAd?(this.videoAd.offClose(),this.videoAd.onClose(function(o){return n.videoAd.offClose(),o&&o.isEnded||void 0===o?t&&t():e&&e()}),void this.videoAd.show().catch(function(){n.videoAd.load().then(function(){return n.videoAd.show()}).catch(function(){console.log("\u5e7f\u544a\u5c55\u793a\u5931\u8d25")})})):(console.log("\u6fc0\u52b1\u6a21\u62df\u6210\u529f2"),t&&t())},t.prototype.getRank=function(){cc.sys.platform==cc.sys.WECHAT_GAME?wx.postMessage({event:"getRank"}):console.log("\u3010\u83b7\u53d6\u6392\u540d\u3011\u4ec5\u652f\u6301\u5fae\u4fe1\u5e73\u53f0!")},t.prototype.setRank=function(t){cc.sys.platform==cc.sys.WECHAT_GAME?wx.postMessage({event:"setScore",score:t}):console.log("\u3010\u8bbe\u7f6e\u6392\u540d\u3011\u4ec5\u652f\u6301\u5fae\u4fe1\u5e73\u53f0!",t)},t.prototype.getSafeArea=function(){if(this.winSize)return this.winSize;if(cc.sys.platform==cc.sys.BYTEDANCE_GAME){var t=tt.getSystemInfoSync().safeArea;return console.log("\u3010\u5b89\u5168\u533a\u57df\u3011\u6296\u97f3",t),this.winSize=t,{height:t.top}}return cc.sys.platform==cc.sys.WECHAT_GAME?(t=wx.getSystemInfoSync(),this.winSize=t,t):(console.log("\u3010\u5b89\u5168\u533a\u57df\u3011\u4ec5\u652f\u6301\u6296\u97f3/\u5fae\u4fe1\u5e73\u53f0!"),null)},t._instance=null,t}();n.default=o,cc._RF.pop()},{}],SettingLayer:[function(t,e,n){"use strict";cc._RF.push(e,"e404exBptVB0L+pVm6Q6Bjc","SettingLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("./../StaticInstance"),c=t("../manager/AudioManager"),u=t("./Baselayer"),l=t("../manager/DataManager"),p=t("../manager/EventManager"),d=t("../manager/SdkManager"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshNode=null,e.homeNode=null,e.musicNode=null,e.soundNode=null,e}return a(e,t),e.prototype.onEnable=function(){d.default.instance.showInterstitialAd(),p.default.instance.on(r.ENUM_GAME_EVENT.RENDOR_HOME_BTN,this.setHomeBtn,this),p.default.instance.on(r.ENUM_GAME_EVENT.RENDOR_REFRESH_BTN,this.setRefreshBtn,this),this.rendorMusic(),this.rendorSound()},e.prototype.onDisable=function(){p.default.instance.off(r.ENUM_GAME_EVENT.RENDOR_HOME_BTN,this.setHomeBtn),p.default.instance.off(r.ENUM_GAME_EVENT.RENDOR_REFRESH_BTN,this.setRefreshBtn)},e.prototype.onCloseClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SETTING,!1)},e.prototype.onRestartClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SETTING,!1),p.default.instance.emit(r.ENUM_GAME_EVENT.GAME_RESTART)},e.prototype.onHomeClick=function(){s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.GAME,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SETTING,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.MENU,!0)},e.prototype.onMusicClick=function(){l.default.instance.audioMusic=!l.default.instance.audioMusic,l.default.instance.audioMusic?c.default.instance.playMusic():c.default.instance.stopMusic(),this.rendorMusic()},e.prototype.onSoundClick=function(){l.default.instance.audioSound=!l.default.instance.audioSound,this.rendorSound()},e.prototype.setHomeBtn=function(t){void 0===t&&(t=!0),this.homeNode.active=t},e.prototype.setRefreshBtn=function(t){void 0===t&&(t=!0),this.refreshNode.active=t},e.prototype.rendorMusic=function(){this.musicNode.getChildByName("on").active=l.default.instance.audioMusic,this.musicNode.getChildByName("off").active=!l.default.instance.audioMusic},e.prototype.rendorSound=function(){this.soundNode.getChildByName("on").active=l.default.instance.audioSound,this.soundNode.getChildByName("off").active=!l.default.instance.audioSound},i([_(cc.Node)],e.prototype,"refreshNode",void 0),i([_(cc.Node)],e.prototype,"homeNode",void 0),i([_(cc.Node)],e.prototype,"musicNode",void 0),i([_(cc.Node)],e.prototype,"soundNode",void 0),i([f],e)}(u.default);n.default=y,cc._RF.pop()},{"../Enum":"Enum","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/SdkManager":"SdkManager","./../StaticInstance":"StaticInstance","./Baselayer":"Baselayer"}],ShopLayer:[function(t,e,n){"use strict";cc._RF.push(e,"21dcbJiV/BFi4cw7D/H3OXX","ShopLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("../manager/AudioManager"),c=t("../manager/DataManager"),u=t("../manager/EventManager"),l=t("../manager/ToastManager"),p=t("../StaticInstance"),d=t("../Utils"),h=t("./Baselayer"),f=cc._decorator,_=f.ccclass,y=f.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diamondLabel=null,e}return a(e,t),e.prototype.onEnable=function(){u.default.instance.on(r.ENUM_GAME_EVENT.REFRSH_DIAMOND,this.setDiamind,this),u.default.instance.emit(r.ENUM_GAME_EVENT.REFRSH_DIAMOND)},e.prototype.onDisable=function(){u.default.instance.off(r.ENUM_GAME_EVENT.REFRSH_DIAMOND,this.setDiamind)},e.prototype.onCloseClick=function(){s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),p.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.SHOP,!1)},e.prototype.setDiamind=function(){var t=c.default.instance.diamond;this.diamondLabel.string=d.formatCoin(t)},e.prototype.onBuyProByDiamond=function(t,e){if(s.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),c.default.instance.diamond-100<0)l.default.instance.show("\u4f59\u989d\u4e0d\u8db3");else{c.default.instance.diamond-=100;var n=Number(e);c.default.instance.skillNums[n]+=1,c.default.instance.save(),u.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_PROPNUM),u.default.instance.emit(r.ENUM_GAME_EVENT.REFRSH_DIAMOND)}},i([y(cc.Label)],e.prototype,"diamondLabel",void 0),i([_],e)}(h.default);n.default=E,cc._RF.pop()},{"../Enum":"Enum","../StaticInstance":"StaticInstance","../Utils":"Utils","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/ToastManager":"ToastManager","./Baselayer":"Baselayer"}],StaticInstance:[function(t,e,n){"use strict";cc._RF.push(e,"391d45XubhOOpS4iFI8Th59","StaticInstance"),Object.defineProperty(n,"__esModule",{value:!0}),n.StaticInstance=void 0;var o=function(){function t(){}return t.setUIManager=function(e){t.uiManager=e},t.uiManager=void 0,t}();n.StaticInstance=o,cc._RF.pop()},{}],TargetItem:[function(t,e,n){"use strict";cc._RF.push(e,"8d88aPjRpFGh563VKyCYcQi","TargetItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./manager/DataManager"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockNode=null,e.blocks=[],e.num=null,e.icon=null,e.type=-1,e.targetNum=0,e.isTargetDone=!1,e}return a(e,t),e.prototype.init=function(t,e){this.type=t,this.targetNum=e,0==e?(this.isTargetDone=!0,this.icon.active=!0,this.num.node.active=!1):this.num.string=String(e),this.blockNode.getComponent(cc.Sprite).spriteFrame=this.blocks[t],cc.tween(this.blockNode).to(.15,{scale:.9}).to(.15,{scale:1}).start()},e.prototype.checkTarget=function(){var t=this;this.isTargetDone||(this.targetNum--,r.default.instance.currentData.target.find(function(e){return e.type==t.type}).num=this.targetNum,0==this.targetNum?(this.isTargetDone=!0,this.icon.active=!0,this.num.node.active=!1):(cc.tween(this.blockNode).to(.2,{scale:.8}).to(.2,{scale:1}).to(.2,{scale:1.2}).to(.2,{scale:1}).start(),this.num.string=String(this.targetNum)))},i([u(cc.Node)],e.prototype,"blockNode",void 0),i([u([cc.SpriteFrame])],e.prototype,"blocks",void 0),i([u(cc.Label)],e.prototype,"num",void 0),i([u(cc.Node)],e.prototype,"icon",void 0),i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./manager/DataManager":"DataManager"}],ToastManager:[function(t,e,n){"use strict";cc._RF.push(e,"a7d6cogtS1C/b4KDvkHP7JT","ToastManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},Object.defineProperty(t,"instance",{get:function(){return this.getInstance()},enumerable:!1,configurable:!0}),t.prototype.show=function(t,e){void 0===t&&(t="");var n=void 0===e?{}:e,o=n.gravity,a=void 0===o?"CENTER":o,i=n.duration,r=void 0===i?1:i,s=n.bg_color,c=void 0===s?cc.color(102,102,102,200):s,u=cc.director.getScene().getComponentInChildren(cc.Canvas),l=u.node.width,p=u.node.height,d=new cc.Node,h=new cc.Node,f=h.addComponent(cc.Label);f.horizontalAlign=cc.Label.HorizontalAlign.CENTER,f.verticalAlign=cc.Label.VerticalAlign.CENTER,f.fontSize=30,f.string=t,t.length*f.fontSize>3*l/5?(h.width=3*l/5,f.overflow=cc.Label.Overflow.RESIZE_HEIGHT):h.width=t.length*f.fontSize;var _=1+~~(t.length*f.fontSize/(3*l/5));h.height=f.fontSize*_;var y=d.addComponent(cc.Graphics);y.arc(-h.width/2,0,h.height/2+20,.5*Math.PI,1.5*Math.PI,!0),y.lineTo(h.width/2,-(h.height/2+20)),y.arc(h.width/2,0,h.height/2+20,1.5*Math.PI,.5*Math.PI,!0),y.lineTo(-h.width/2,h.height/2+20),y.fillColor=c,y.fill(),d.addChild(h),"CENTER"===a?(d.y=0,d.x=0):"TOP"===a?d.y=d.y+p/5*2:"BOTTOM"===a&&(d.y=d.y-p/5*2),d.group="ui",u.node.addChild(d);var E=cc.callFunc(function(){d.destroy()}),g=cc.sequence(cc.moveBy(r,cc.v2(0,0)),cc.fadeOut(.3),E);cc.tween(d).then(g).start()},t._instance=null,t}();n.default=o,cc._RF.pop()},{}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"60e7ay+VD1Bdas5NZHeOCkm","UIManager");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./../Enum"),s=t("./../StaticInstance"),c=t("../ui/MenuLayer"),u=t("../ui/GameLayer"),l=t("../ui/SettingLayer"),p=t("../ui/LoseLayer"),d=t("../ui/WinLayer"),h=t("../ui/LoadingLayer"),f=t("../ui/RankLayer"),_=t("../ui/ShopLayer"),y=t("../ui/RewardLayer"),E=cc._decorator,g=E.ccclass,M=E.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingLayer=null,e.menuLayer=null,e.gameLayer=null,e.settingLayer=null,e.loseLayer=null,e.winLayer=null,e.rankLayer=null,e.shopLayer=null,e.rewardLayer=null,e.uiMap=new Map,e}return a(e,t),e.prototype.onLoad=function(){s.StaticInstance.setUIManager(this),this.uiMap.set(r.ENUM_UI_TYPE.LOADING,this.loadingLayer),this.uiMap.set(r.ENUM_UI_TYPE.MENU,this.menuLayer),this.uiMap.set(r.ENUM_UI_TYPE.GAME,this.gameLayer),this.uiMap.set(r.ENUM_UI_TYPE.SETTING,this.settingLayer),this.uiMap.set(r.ENUM_UI_TYPE.LOSE,this.loseLayer),this.uiMap.set(r.ENUM_UI_TYPE.WIN,this.winLayer),this.uiMap.set(r.ENUM_UI_TYPE.RANK,this.rankLayer),this.uiMap.set(r.ENUM_UI_TYPE.SHOP,this.shopLayer),this.uiMap.set(r.ENUM_UI_TYPE.REWARD,this.rewardLayer)},e.prototype.toggle=function(t,e,n){if(void 0===e&&(e=!0),this.uiMap.has(t)){var o=this.uiMap.get(t);e?o.show():o.hide(),n&&n()}},e.prototype.getTargetItem=function(t,e){var n=this.uiMap.get(r.ENUM_UI_TYPE.GAME).getTargetItem(t);e&&e(n)},e.prototype.setTipsNode=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.uiMap.get(r.ENUM_UI_TYPE.GAME).setTipsNode(t,e)},i([M(h.default)],e.prototype,"loadingLayer",void 0),i([M(c.default)],e.prototype,"menuLayer",void 0),i([M(u.default)],e.prototype,"gameLayer",void 0),i([M(l.default)],e.prototype,"settingLayer",void 0),i([M(p.default)],e.prototype,"loseLayer",void 0),i([M(d.default)],e.prototype,"winLayer",void 0),i([M(f.default)],e.prototype,"rankLayer",void 0),i([M(_.default)],e.prototype,"shopLayer",void 0),i([M(y.default)],e.prototype,"rewardLayer",void 0),i([g],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../ui/GameLayer":"GameLayer","../ui/LoadingLayer":"LoadingLayer","../ui/LoseLayer":"LoseLayer","../ui/MenuLayer":"MenuLayer","../ui/RankLayer":"RankLayer","../ui/RewardLayer":"RewardLayer","../ui/SettingLayer":"SettingLayer","../ui/ShopLayer":"ShopLayer","../ui/WinLayer":"WinLayer","./../Enum":"Enum","./../StaticInstance":"StaticInstance"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"f4cdfbZs6pBD7j9c9ZdrH7K","Utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.getUrlRelativePath=n.loadRemoteBundle=n.formatCoin=n.clone=n.getRandom=void 0,n.getRandom=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},n.clone=function(t){return JSON.parse(JSON.stringify(t))},n.formatCoin=function(t){if("number"!=typeof t)return"0";if(t<Math.pow(10,4))return String(t);var e=String(t/Math.pow(10,4));return e.substring(0,e.includes(".")?4:3).replace(/\.$/g,"")+"w"},n.loadRemoteBundle=function(t,e){var n=this.getUrlRelativePath(cc.resources.base)+"/"+t;cc.assetManager.loadBundle(n,function(t,n){e(t,n)})},n.getUrlRelativePath=function(t){var e=t.substring(0,t.lastIndexOf("/")-1);return e.substring(0,e.lastIndexOf("/"))},cc._RF.pop()},{}],WinLayer:[function(t,e,n){"use strict";cc._RF.push(e,"cf5e5mk3shHmaA1BS8Kcp+T","WinLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Enum"),s=t("./../StaticInstance"),c=t("../manager/AudioManager"),u=t("./Baselayer"),l=t("../manager/EventManager"),p=t("../manager/SdkManager"),d=t("../manager/DataManager"),h=t("../manager/ToastManager"),f=cc._decorator,_=f.ccclass,y=f.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propCountLabel=null,e.propIcon=null,e.btnDouble=null,e.propNode=null,e.propType=-1,e.propCount=-1,e}return a(e,t),e.prototype.onEnable=function(){l.default.instance.on(r.ENUM_GAME_EVENT.REWARD_COUNT,this.setPropReward,this)},e.prototype.onDisable=function(){l.default.instance.off(r.ENUM_GAME_EVENT.REWARD_COUNT,this.setPropReward)},e.prototype.setPropReward=function(t,e){var n=this;this.propNode.active=t>0,this.btnDouble.active=t>0,this.propCount=t,this.propType=e,this.propCountLabel.string="X"+t,this.propIcon.node.scale=4==e?2:1,cc.resources.load("prop/prop"+e,cc.SpriteFrame,function(t,e){cc.isValid(n.node)&&(n.propIcon.spriteFrame=e)})},e.prototype.onNextClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.WIN,!1),l.default.instance.emit(r.ENUM_GAME_EVENT.GAME_NEXT)},e.prototype.onShareClick=function(){c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),p.default.instance.activeShare()},e.prototype.onHomeClick=function(){d.default.instance.level++,d.default.instance.reset(),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.GAME,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.WIN,!1),s.StaticInstance.uiManager.toggle(r.ENUM_UI_TYPE.MENU,!0)},e.prototype.doubleGet=function(){var t=this;c.default.instance.playSound(r.ENUM_AUDIO_CLIP.CLICK2),d.default.instance.rewardPropCount=this.propCount,d.default.instance.rewardPropType=this.propType,p.default.instance.showVideoAd(function(){d.default.instance.skillNums[d.default.instance.rewardPropType]+=d.default.instance.rewardPropCount,d.default.instance.rewardPropCount=-1,d.default.instance.rewardPropType=-1,d.default.instance.save(),l.default.instance.emit(r.ENUM_GAME_EVENT.RENDOR_PROPNUM),t.propNode.active=!1,t.btnDouble.active=!1},function(){d.default.instance.rewardPropCount=-1,d.default.instance.rewardPropType=-1,h.default.instance.show("\u89c6\u9891\u64ad\u653e\u4e2d\u65ad")})},i([y(cc.Label)],e.prototype,"propCountLabel",void 0),i([y(cc.Sprite)],e.prototype,"propIcon",void 0),i([y(cc.Node)],e.prototype,"btnDouble",void 0),i([y(cc.Node)],e.prototype,"propNode",void 0),i([_],e)}(u.default);n.default=E,cc._RF.pop()},{"../Enum":"Enum","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/SdkManager":"SdkManager","../manager/ToastManager":"ToastManager","./../StaticInstance":"StaticInstance","./Baselayer":"Baselayer"}],ZzButtonSidebar:[function(t,e,n){"use strict";cc._RF.push(e,"b0e9cGt1y5AeZDMrR8QQ/XD","ZzButtonSidebar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=t("./Enum"),c=t("./manager/EventManager"),u=t("./manager/ZzStorage"),l=t("./Utils"),p=t("./ZzVwSidebar"),d=cc._decorator,h=d.ccclass,f=(d.menu,d.property);(function(t){t[t.None=0]="None",t[t.Finish=1]="Finish",t[t.Rewarded=2]="Rewarded"})(r||(r={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskCT=28800,e.redpointNode=null,e.SRStateKey="SideBarRewardState",e._state=r.None,e}return a(e,t),e.prototype.onLoad=function(){cc.sys.platform===cc.sys.BYTEDANCE_GAME||cc.sys.isBrowser?(this.state=u.default.getInt(this.SRStateKey,r.None),Date.now()-u.default.getInt("LastSidebarRewardTime",0)>1e3*this.taskCT&&(u.default.setInt("LastSidebarRewardTime",Date.now()),this.redpointNode.active=!0,this.state==r.Rewarded&&(this.state=r.None)),this.state===r.Rewarded&&this.hide()):this.node.active=!1},e.prototype.start=function(){this.checkSupportSideBar(),this.node.on("click",this.choseSelf,this)},e.prototype.hide=function(){this.node.active=!1},e.prototype.checkSupportSideBar=function(){var t=this;cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.checkScene&&tt.checkScene({scene:"sidebar",success:function(e){e.isExist?t.checkLaunchFromSideBar():t.hide()}})},e.prototype.checkLaunchFromSideBar=function(){var t;this.state===r.None&&((t=window.glaunchOnShow)&&"homepage"==t.launch_from&&"sidebar_card"==t.location&&this.state===r.None&&(this.state=r.Finish),window.glaunchOnShow=null)},e.prototype.finishSidebarReward=function(){c.default.instance.emit(s.ENUM_GAME_EVENT.RANDOM_PROP),this.state=r.Rewarded,this.hide(),u.default.setInt("LastSidebarRewardTime",Date.now())},e.prototype.choseSelf=function(){var t=this;this.redpointNode.active=!1,l.loadRemoteBundle("toutiao",function(e,n){e||n.load("prefab/ZzVwSidebar",cc.Prefab,function(e,n){var o=cc.instantiate(n);o.parent=cc.find("Canvas");var a=o.getComponent(p.default);a.init({finish:t.state==r.Finish}),a.onClose=function(e){e&&t.finishSidebarReward()}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,u.default.setInt(this.SRStateKey,t)},enumerable:!1,configurable:!0}),i([f],e.prototype,"taskCT",void 0),i([f(cc.Node)],e.prototype,"redpointNode",void 0),i([h],e)}(cc.Component);n.default=_,cc._RF.pop()},{"./Enum":"Enum","./Utils":"Utils","./ZzVwSidebar":"ZzVwSidebar","./manager/EventManager":"EventManager","./manager/ZzStorage":"ZzStorage"}],ZzStorage:[function(t,e,n){"use strict";cc._RF.push(e,"198a0V3xldOwb4+SBOICcfl","ZzStorage"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getItem=function(t,e){void 0===e&&(e=null);var n=cc.sys.localStorage.getItem(t);return null==n||""==n?e:n},t.setItem=function(t,e){cc.sys.localStorage.setItem(t,e)},t.removeItem=function(t){cc.sys.localStorage.removeItem(t)},t.clear=function(){cc.sys.localStorage.clear()},t.key=function(t){return cc.sys.localStorage.key(t)},t.getInt=function(t,e){void 0===e&&(e=0);var n=this.getItem(t);return null==n?e:parseInt(n)},t.setInt=function(t,e){this.setItem(t,e+"")},t}();n.default=o,cc._RF.pop()},{}],ZzVwSidebar:[function(t,e,n){"use strict";cc._RF.push(e,"8a285/66GVEaJ/y6I55ZuAl","ZzVwSidebar");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.menu,r.property),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.openNode=null,e.rewardNode=null,e.btnClose=null,e.onClose=null,e}return a(e,t),e.prototype.onLoad=function(){var t=this;this.btnClose&&this.btnClose.node.once(cc.Node.EventType.TOUCH_END,function(){t.close()})},e.prototype.init=function(t){this.openNode.active=!t.finish,this.rewardNode.active=t.finish},e.prototype.choseOpenSidebar=function(){tt.navigateToScene&&tt.navigateToScene({scene:"sidebar",fail:function(t){console.warn(t)}}),this.close()},e.prototype.choseReward=function(){this.close(!0)},e.prototype.close=function(t){var e=this;void 0===t&&(t=!1),t&&this.onClose&&this.onClose(t),this.node.active=!1,this.scheduleOnce(function(){return e.node.destroy()})},i([c(cc.Node)],e.prototype,"openNode",void 0),i([c(cc.Node)],e.prototype,"rewardNode",void 0),i([c(cc.Button)],e.prototype,"btnClose",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],safeWidget:[function(t,e,n){"use strict";cc._RF.push(e,"8d9dfxfA/xPIZX6r+ptyS55","safeWidget");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./manager/SdkManager"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){var t=r.default.instance.getSafeArea();if(t){var e=cc.winSize.height-t.windowHeight;if(cc.isValid(this.node.getComponent(cc.Widget))){var n=this.node.getComponent(cc.Widget);n.top=n.top-e,n.updateAlignment()}}},i([c],e)}(cc.Component));n.default=u,cc._RF.pop()},{"./manager/SdkManager":"SdkManager"}]},{},["Chess","ChessEffect","Enum","Index","Levels","StaticInstance","TargetItem","Utils","ZzButtonSidebar","ZzVwSidebar","AudioManager","DataManager","EventManager","GameManager","ResourceManager","SdkManager","ToastManager","UIManager","ZzStorage","safeWidget","Baselayer","GameLayer","LoadingLayer","LoseLayer","MenuLayer","RankLayer","RewardLayer","SettingLayer","ShopLayer","WinLayer"]);